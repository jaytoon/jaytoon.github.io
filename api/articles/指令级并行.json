{"title":"指令级并行","uid":"9b1e49c0cf2beda8e46e78f90df1dad4","slug":"指令级并行","date":"2022-10-15T08:45:40.000Z","updated":"2022-10-16T07:03:49.713Z","comments":true,"path":"api/articles/指令级并行.json","keywords":null,"cover":[],"content":"<h1 id=\"1-指令级并行\"><a href=\"#1-指令级并行\" class=\"headerlink\" title=\"1.指令级并行\"></a>1.指令级并行</h1><h2 id=\"1-1-循环调度\"><a href=\"#1-1-循环调度\" class=\"headerlink\" title=\"1.1 循环调度\"></a>1.1 循环调度</h2><h3 id=\"1-1-1-未调度\"><a href=\"#1-1-1-未调度\" class=\"headerlink\" title=\"1.1.1 未调度\"></a>1.1.1 未调度</h3><p><img src=\"https://i0.hdslb.com/bfs/album/9b670af07d457b26f9ffb391a882ebf911ba431d.png\" alt=\"循环无执行调度\"></p>\n<p>以下使用数字代表所在的时钟周期，如②代表第二个时钟周期</p>\n<p>②的停顿原因为浮点寄存器F0进行了写入后，需要一个时钟周期的停顿</p>\n<p>④和⑤的停顿原因为进行了浮点运算ADDD，需要停顿两个时钟周期</p>\n<p>⑧的停顿原因为R1为上一条指令的结果，需要停顿一个时钟周期</p>\n<p>⑩的停顿原因为分支指令有一个延时槽时间，延时槽中的指令一定会被执行</p>\n<h3 id=\"1-1-2-调度后\"><a href=\"#1-1-2-调度后\" class=\"headerlink\" title=\"1.1.2 调度后\"></a>1.1.2 调度后</h3><p><img src=\"https://i0.hdslb.com/bfs/album/6b5448d2a6374251837499cd20121274b4c6b1ca.png\" alt=\"循环调度后\"></p>\n<p>由于前置指令有数据相关，将⑦所对应的指令调度到第一个停顿，即调度后的②，剩下的⑨对应的指令调度到下一个停顿，调度到⑤而不是④的原因为调度到④后，原⑥所对应的指令将无法进行执行，调度到⑤后由于分支指令有一个时钟周期的延时槽，⑥对应的指令将被执行。</p>\n<h3 id=\"1-1-3-循环展开\"><a href=\"#1-1-3-循环展开\" class=\"headerlink\" title=\"1.1.3 循环展开\"></a>1.1.3 循环展开</h3><p>将循环进行展开若干次(如四次)后，可以将相同的数据写入指令等进行集中执行（如同时取出多个数）展开后可以减少引入分支指令的停顿占比，但由于展开后进行数据处理会需要更多的不同名寄存器，代码量也会成倍增加。</p>\n<h2 id=\"1-2-动态调度\"><a href=\"#1-2-动态调度\" class=\"headerlink\" title=\"1.2 动态调度\"></a>1.2 动态调度</h2><h3 id=\"1-2-1-记分牌技术\"><a href=\"#1-2-1-记分牌技术\" class=\"headerlink\" title=\"1.2.1 记分牌技术\"></a>1.2.1 记分牌技术</h3><p><img src=\"https://i0.hdslb.com/bfs/album/3d1c2027870fd8ddae156b6610edce3773ab2563.png\" alt=\"记分牌结构\"></p>\n<p>指令乱序执行，无数据相关，解决写后读</p>\n<h4 id=\"1-2-1-1-指令流出\"><a href=\"#1-2-1-1-指令流出\" class=\"headerlink\" title=\"1.2.1.1 指令流出\"></a>1.2.1.1 指令流出</h4><p>检查指令所需的功能部件空闲，所使用的目的寄存器和正在执行指令的目的寄存器不同（保证无WAW）</p>\n<h4 id=\"1-2-1-2-读操作数\"><a href=\"#1-2-1-2-读操作数\" class=\"headerlink\" title=\"1.2.1.2 读操作数\"></a>1.2.1.2 读操作数</h4><p>如果正在执行的指令对当前指令的源寄存器的写操作，那么该指令阻塞在功能部件处直到指令所需的所有源寄存器就绪（解决RAW）</p>\n<h4 id=\"1-2-1-3-执行指令\"><a href=\"#1-2-1-3-执行指令\" class=\"headerlink\" title=\"1.2.1.3 执行指令\"></a>1.2.1.3 执行指令</h4><p>从已经就绪的源寄存器中取出操作数送到功能部件进行运算，产生计算结果后修改记分牌</p>\n<h4 id=\"1-2-1-4-写结果\"><a href=\"#1-2-1-4-写结果\" class=\"headerlink\" title=\"1.2.1.4 写结果\"></a>1.2.1.4 写结果</h4><p>先检查目的寄存器中的值是否被前面的指令读出使用（包括前面的指令没有读取操作数以及指令的源寄存器为当前指令的目的寄存器），将计算结果写入到目的寄存器（解决WAR）</p>\n<h2 id=\"1-3-算法\"><a href=\"#1-3-算法\" class=\"headerlink\" title=\"1.3 算法\"></a>1.3 算法</h2>","text":"1.指令级并行1.1 循环调度1.1.1 未调度 以下使用数字代表所在的时钟周期，如②代表第二个时钟周期 ②的停顿原因为浮点寄存器F0进行了写入后，需要一个时钟周期的停顿 ④和⑤的停顿原因为进行了浮点运算ADDD，需要停顿两个时钟周期 ⑧的停顿原因为R1为上一条指令的结果，需要停...","link":"","photos":[],"count_time":{"symbolsCount":746,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"学习","slug":"学习","count":2,"path":"api/tags/学习.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1-%E6%8C%87%E4%BB%A4%E7%BA%A7%E5%B9%B6%E8%A1%8C\"><span class=\"toc-text\">1.指令级并行</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-%E5%BE%AA%E7%8E%AF%E8%B0%83%E5%BA%A6\"><span class=\"toc-text\">1.1 循环调度</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-1-%E6%9C%AA%E8%B0%83%E5%BA%A6\"><span class=\"toc-text\">1.1.1 未调度</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-2-%E8%B0%83%E5%BA%A6%E5%90%8E\"><span class=\"toc-text\">1.1.2 调度后</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-1-3-%E5%BE%AA%E7%8E%AF%E5%B1%95%E5%BC%80\"><span class=\"toc-text\">1.1.3 循环展开</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2-%E5%8A%A8%E6%80%81%E8%B0%83%E5%BA%A6\"><span class=\"toc-text\">1.2 动态调度</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-2-1-%E8%AE%B0%E5%88%86%E7%89%8C%E6%8A%80%E6%9C%AF\"><span class=\"toc-text\">1.2.1 记分牌技术</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-1-1-%E6%8C%87%E4%BB%A4%E6%B5%81%E5%87%BA\"><span class=\"toc-text\">1.2.1.1 指令流出</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-1-2-%E8%AF%BB%E6%93%8D%E4%BD%9C%E6%95%B0\"><span class=\"toc-text\">1.2.1.2 读操作数</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-1-3-%E6%89%A7%E8%A1%8C%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">1.2.1.3 执行指令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-2-1-4-%E5%86%99%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">1.2.1.4 写结果</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-3-%E7%AE%97%E6%B3%95\"><span class=\"toc-text\">1.3 算法</span></a></li></ol></li></ol>","author":{"name":"Jaytoon","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2022/10/06/76e7a3b7096a3622.jpg","link":"/","description":"记录研究生阶段的学习和生活","socials":{"github":"https://github.com/jaytoon","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://www.bilibili.com/video/BV1TN4y1M72k"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"mapped":true,"prev_post":{"title":"PicGo图床搭建","uid":"ee099929a3be821a34fd40a319c6a132","slug":"picgo图床折腾","date":"2022-10-15T19:34:46.000Z","updated":"2022-10-16T04:57:06.057Z","comments":true,"path":"api/articles/picgo图床折腾.json","keywords":null,"cover":[],"text":"1.PicGo安装根据PicGo官方文档进行下载安装即可，根绝个人喜好下载相应版本，建议下载稳定版。 1.1提供的Windows下载地址 蓝奏云下载地址:密码:akb1 百度网盘 下载地址提取码：3wln 2.使用B站搭建图床PicGo中搜索插件bilibili并进行安装，浏览器...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"博客搭建之路","slug":"博客搭建之路","count":3,"path":"api/tags/博客搭建之路.json"}],"author":{"name":"Jaytoon","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2022/10/06/76e7a3b7096a3622.jpg","link":"/","description":"记录研究生阶段的学习和生活","socials":{"github":"https://github.com/jaytoon","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://www.bilibili.com/video/BV1TN4y1M72k"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}},"feature":true},"next_post":{"title":"高级计算机体系结构复习笔记","uid":"8d8f32f65c9a573d05d620fdfbafdc11","slug":"新建博客文章名","date":"2022-10-14T11:03:41.000Z","updated":"2022-10-16T11:56:04.412Z","comments":true,"path":"api/articles/新建博客文章名.json","keywords":null,"cover":"https://i0.hdslb.com/bfs/album/a0eb45e3a8bf3c05b4a57b270368d003b5f174e9.png","text":"1.各种“相关”的学习1.1 考试技巧判断输出相关的技巧为指令左边出现同名的寄存器，则两条指令发生输出相关，判断真相关（数据相关中的一种）的技巧为先进入流水线的指令的目的寄存器和后一条指令的寄存器相同，产生数据流动，则这两条指令产生真相关，即先执行指令的左部寄存器和后执行的指令的...","link":"","photos":[],"count_time":{"symbolsCount":330,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"学习","slug":"学习","count":2,"path":"api/tags/学习.json"}],"author":{"name":"Jaytoon","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2022/10/06/76e7a3b7096a3622.jpg","link":"/","description":"记录研究生阶段的学习和生活","socials":{"github":"https://github.com/jaytoon","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"http://localhost:4000/svg/bilibili.svg","link":"https://www.bilibili.com/video/BV1TN4y1M72k"},"baidu":{"icon":"iconfont icon-baidu","link":"https://live.bilibili.com/22619211"}}}}}}